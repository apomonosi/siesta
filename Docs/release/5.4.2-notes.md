# SIESTA 5.4.2 Release Notes (2025-12-16)

## Changes and improvements

- Removed the read_options dependency for the QMMM driver. This reduces the need of extra dependencies and dummy modules.
  Cleaned up pressure units from read_options.
  Removed now unnecessary dummy modules.

  ([504](https://gitlab.com/siesta-project/siesta/-/merge_requests/504))


- Reworked the QMMM Ewald sums in order to avoid numerical issues.

  * Added options to fine-tune each of the Ewald parameters (kcut-rcut-alpha).
  * Several loops in pcpot and mmforces were rearranged.
  * Ewald k-points are now pre-computed to save computational cost (at the cost
    of increased memory usage, but not much).
  * In mmforces, the real-space mesh is precomputed to save time. This is only
    slightly detrimental in cases where there are too few MM atoms and too few
    Ewald k-points, so it should not happen in realistic cases.
  * Separated the neutral-atom interaction. This is now done relying on Vna
    (from phiatm), and the Ewald part only includes the interaction against
    dRHO. This is much more stable and correct.

  ([513](https://gitlab.com/siesta-project/siesta/-/merge_requests/513))


- Changed OpenMP threading option in MPI from 'funneled' to 'serialized'

  * Some pieces of code (e.g. the ELPA library) require the "Serialized" flavor.
  * The change has been made both in Siesta and in TBtrans.

  ([532](https://gitlab.com/siesta-project/siesta/-/merge_requests/532))



## Bugfixes

- Add interface for every MPI function call.

  There were some MPI calls that were not using the proper interfaces.
  Some of them because they are not using mpi_siesta module and others
  not importing all required interfaces. This solve a bug in
  matel_table.F90 and matel_ylm.F90, where the implicit interface had
  problems dealing with MPI_IN_PLACE communications. This was producing
  execution errors when compiled with some compilers.

  ([528](https://gitlab.com/siesta-project/siesta/-/merge_requests/528))


- Fixed p_atom variable initialization in kinefsm

  ([529](https://gitlab.com/siesta-project/siesta/-/merge_requests/529))



## Build related

- Added build flag for removing host-specific
  compilation options.

  They are automatically removed when cross-compiling
  or when -DSIESTA_WITH_HOST_OPTIMIZATION=OFF.

  ([519](https://gitlab.com/siesta-project/siesta/-/merge_requests/519))


- Enhance external ELPA finder module. Use new ELSI official release v2.12.0

  The ELSI upstream has incorporated (in v2.12.0) the relevant patches contributed by
  the Siesta project.

  ([531](https://gitlab.com/siesta-project/siesta/-/merge_requests/531))


- Fix handling of OpenMP-enabled versions of ELPA

  The new ELPA finder module uses the input variable ELPA_PREFER_OPENMP
  to search for the right flavor of ELPA. This variable is now set as a
  dependent option, which is hidden (and OFF) if SIESTA_WITH_OPENMP is
  OFF, and defaults to ON if SIESTA_WITH_OPENMP is ON (but can be set to
  OFF if desired).

  ([533](https://gitlab.com/siesta-project/siesta/-/merge_requests/533))



## Documentation

- Updated list of contributors.

  ([527](https://gitlab.com/siesta-project/siesta/-/merge_requests/527))
